!function(e){var t={};t.isIOS=/i[a-z]+;.*cpu.*mac os x.*applewebkit/i.test(window.navigator.userAgent)&&!/(version)|(micromessenger)/i.test(window.navigator.userAgent),t.isAnd=/android.*applewebkit.*version.*mobile safari/i.test(window.navigator.userAgent);var o=function(e){t=e,t.isApp=t.isIOS?2:t.isAnd?1:0,t.selector=e.selector||"#nb_content",t.header=e.header||"",t.removeLiveHeader=e.removeLiveHeader?!0:!1,t.showBanner=e.showBanner?!0:!1,t.bannerTop=e.bannerTop||0,t.showNotice=e.showNotice?!0:!1,t.hideQuickSearch=e.hideQuickSearch?!0:!1,t.showToTop=e.showToTop?!0:!1,t.bottomHeight=e.bottomHeight||0,t.searchIcon=e.searchIcon?(".nb_search_click"==e.searchIcon?"":e.searchIcon+",")+".nb_search_click":".nb_search_click",t.betIcon=e.betIcon||".nb_betCartIcon",t.sportIconStyle=e.sportIconStyle||0,t.clickIconBack=e.clickIconBack?!0:!1,t.homeIcon=e.homeIcon||"",t.liveIcon=e.liveIcon||"",t.todayIcon=e.todayIcon||"",t.earlyIcon=e.earlyIcon||"",t.myBetIcon=e.myBetIcon||"",t.sportList=e.sportList||["live","today","early"],t.complete=e.complete,t.prePageChange=e.prePageChange,t.pageChanged=e.pageChanged,t.dataUpdated=e.dataUpdated,t.betSuccess=e.betSuccess||e.betSuccessCallback,t.unLogin=e.unLogin||e.unLoginCallback,t.betFail=e.betFail||e.betFailCallback,t.openBetBox=e.openBetBox,t.closeBetBox=e.closeBetBox,t.openSearchBox=e.openSearchBox,t.closeSearchBox=e.closeSearchBox,t.openSelectBox=e.openSelectBox,t.closeSelectBox=e.closeSelectBox,t.stopUpdatePage=e.stopUpdatePage,t.settingHref=e.settingHref,t.pageFlag=e.pageFlag,t.setHeight=e.setHeight,t.version="?v=1.811",t.client_path="",t.source_path="",t.language_path="",t.html_url="",t.openWindow=e.openWindow||function(e){window.open(e,"_blank")},o.opt=t;var n=this;window.NBServer?n.updateServer(n):o.getSever({fun:function(){n.updateServer(n)}})};o.loaded=[],o.prototype={checkKey:function(e){o.loadFileList(["/css/m.nbbet.min.css","/js/platform/base.js","/js/plugin/storage/store.legacy.min.js"],t.source_path,t.version,function(){e.renderHtml(e)})},updateServer:function(o){for(var n=0,i=0;i<NBServer.p_mark.length;i++)if(e(NBServer.p_mark[i]).length){n=i;break}t.client_path=NBServer["p_b"+n],t.source_path=NBServer.p_stm||t.client_path,t.language_path=NBServer.m_lan?NBServer.m_lan:t.client_path,t.version=NBServer.p_m_v,t.html_url=NBServer["p_b"+n]+"/nb_content.html"+NBServer.p_m_v,o.checkKey(o)},renderHtml:function(){e("body").append('<div class="nb_betFixDialog" style="display:none"></div><div class="nb_searchDialog" style="display:none"></div>'),e.get(t.html_url,function(n){if(e(t.selector).html(n),t.settingHref&&"object"==typeof t.settingHref){e("#nb_footer .nb_person_settings").removeAttr("data-NBHref");for(var i in t.settingHref)e("#nb_footer .nb_person_settings").attr(i,t.settingHref[i])}e(".nb_blank_footer").height(t.bottomHeight?t.bottomHeight:0);var a=t&&null!=t.showToTop&&void 0!=t.showToTop?t.showToTop:!0;!a&&e("#nb_footer .nb_versions").remove(),e(".nb_betFixDialog,.nb_searchDialog").css("bottom",t.bottomHeight||0);var r=localStorage.getItem("mobile_config")&&JSON.parse(localStorage.getItem("mobile_config")).nb_language||"zh-cn";o.loadFileList(["/js/platform/language-"+r+".js"],t.language_path,t.version,function(){window.NBLan={lan:lan},lan=null,e(".nb_language_change").each(function(t,o){if(e(o).is("input")){var n=e(o).attr("placeholder").replaceVal(NBLan.lan);e(o).attr("placeholder",n)}else e(o).html(e(o).html().replaceVal(NBLan.lan))}),o.loadFileList(["/js/platform/play-"+r+".js"],t.language_path,t.version,function(){NBLan.wf=wf,wf=null,o.loadFileList(["/js/platform/commenData.js"],t.source_path,t.version,function(){o.loadFileList(["/js/platform/plugin_diy/plugin_sno.js","/js/platform/plugin_diy/plugin_comContent.js","/js/platform/plugin_diy/plugin_league.js","/js/platform/plugin_diy/plugin_search.js","/js/platform/plugin_diy/plugin_footer.js","/js/platform/plugin_diy/plugin_socket_odd.js","/js/platform/plugin_diy/plugin_detail.js","/js/plugin/datePicker/picker.css","/js/plugin/datePicker/datePicker.js","/js/plugin/swiper/swiper.css","/js/plugin/fastclick.js","/js/plugin/swiper/swiper.js","/js/platform/controller.js"],t.source_path,t.version,function(){o.loadFileList(["/js/platform/plugin_diy/plugin_betbox.js"],t.source_path,t.version,function(){window.FastClick&&FastClick.attach(document.body),store.get(NBBase.user_config)||store.set(NBBase.user_config,NBBase.user_config_val),NBBetBox.init({selector:t.betIcon,isApp:t.isApp,bHeight:t.bottomHeight,betSuccessFun:t.betSuccess,unLoginFun:t.unLogin,betFailFun:t.betFail,openBox:t.openBetBox,closeBox:t.closeBetBox,stopUpdatePage:t.stopUpdatePage}),window.NBSocket=NBSocketsOdds.init(),window.NBControl=NBController.init(t),NBComData.timer(),t.complete&&"function"==typeof t.complete&&t.complete(),!t.hideQuickSearch&&NBFooter.init(t)})})})})})},"html")}},o.init=function(e){return new this(e)},window.NBBet=o,o.reload=function(){if(window.NBControl&&NBControl.checkUrl){var e=NBControl.checkUrl();e>-1&&NBControl.goToModule(e,null,o.opt,1)}else location.reload()},o.goToPage=function(t){if(window.NBControl){var o=NBControl.type_url,n="",i=""+t;isNaN(i)?(i=o.indexOf(i)+o.indexOf("nb_"+i)+1,n=0>i?"":o[i]):n=0>i?"":i>o.length-1?"":o[i],e("[data-NBHref='"+n+"']").click()}},o.clearUserInfo=function(e){localStorage.removeItem("nb_mobile_user"),e&&"function"==typeof e&&e()},o.destory=function(){e("#nb_inner_content").remove()},o.reRender=function(){e("#nb_inner_content").remove(),e("body").unbind("click"),e("body").unbind("keyup"),e("body").unbind("blur"),o.init(t)},o.loadFileList=function(e,t,n,i,a){function r(e,t,n){if(c(o.loaded,e))t&&"function"==typeof t&&t();else{var i=n?n:s(e),a=null;if(["script",".js"].indexOf(i)>-1?(a=document.createElement("script"),a.src=e):[".css",".less"].indexOf(i)>-1&&(a=document.createElement("link"),a.href=e,a.type="text/css",a.rel="stylesheet"+(".less"==i?"/less":"")),!a)return void(t&&"function"==typeof t&&t());a.onload=a.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(t&&"function"==typeof t&&t(),o.loaded.push(e))},document.getElementsByTagName("head")[0].appendChild(a)}}function s(e){var t=(e+"?").match(/(\.[a-z]+)\?/i);return t?t[1]:""}function c(e,t){return e&&"object"==typeof e&&e.constructor==Array&&e.indexOf(t)>-1?!0:!1}var l=[];"object"==typeof e&&e.constructor==Array?l=e:"string"==typeof e&&(l=e.split(","));for(var u=0,p=0;p<l.length;p++)r(t+l[p]+n,function(){u++,u==l.length&&i&&"function"==typeof i&&i()},a)},o.getSever=function(t){if(location.host.toLowerCase().indexOf("localhost")>-1)return void o.show("鍦板潃涓嶆敮鎸乴ocalhost");var n="http://uat.config.nbbets.com/server_config.js";e.getScript(n,function(){t&&t.fun&&"function"==typeof t.fun&&t.fun()})},o.show=function(t){var n=function(e){this.clickFlag=0,this.nbShowBox=null,e&&this.createHtml(e)};return n.prototype={createHtml:function(t){var n='<div class="nb_show_box" ><div><div>',i=0,a=this;if("object"==typeof t&&t.constructor!=Array){if(t.title&&(n+='<p class="tit">'+t.title+"</p>"),t.body&&(n+='<p class="'+(t.title?"msg":"tit")+'">'+t.body+"</p>"),t.button&&"object"==typeof t.button&&t.button.constructor==Array&&t.button.length){var r=t.button.length>1?1:0,s="";if(n+='<p class="btn">',t.button.length>1){if(s="",t.button[0].attr&&"object"==typeof t.button[0].attr)for(var c in t.button[0].attr)s+="href"==c&&t.button[0].attr[c].indexOf("://")>0?c+'="'+t.button[0].attr[c]+'"':" data-"+c+'="'+t.button[0].attr[c]+'"';n+='<a class="no"'+s+">"+(t.button[0].name?t.button[0].name:"鍙栨秷")+"</a>"}if(s="",t.button[r].attr&&"object"==typeof t.button[r].attr)for(var c in t.button[r].attr)s+="href"==c&&t.button[r].attr[c].indexOf("://")>0?c+'="'+t.button[r].attr[c]+'"':" data-"+c+'="'+t.button[r].attr[c]+'"';n+='<a class="yes"'+s+">"+(t.button[r].name?t.button[r].name:"纭畾")+"</a></p>",i=1}}else n+="object"==typeof t&&t.constructor==Array?'<p class="tit">'+t.join("<br>")+'</p><p class="btn"><a class="yes">纭畾</a></p>':'<p class="tit">'+t.toString()+'</p><p class="btn"><a class="yes">纭畾</a></p>';n+="</div></div></div>",e(".nb_show_box").remove(),a.nbShowBox=e(n),e("body").css({overflow:"hidden",height:"100%"}).prepend(a.nbShowBox),e(".nb_show_box").css("bottom",o.opt&&o.opt.homeIcon&&!e(o.opt.homeIcon).is(":hidden")&&e(".nb_blank_footer").length?e(".nb_blank_footer").outerHeight(!0):0),e(".nb_show_box>div").css("top",.4*(screen.height-e(".nb_show_box>div").outerHeight(!0))),a.nbShowBox.on("click",function(o){return a.clickFlag?void 0:(a.clickFlag=1,setTimeout(function(){a.clickFlag=0},500),"nb_show_box"==e(o.target).attr("class")?(a.removeCover(),!1):void("yes"==e(o.target).attr("class")?(i&&t.button[t.button.length>1?1:0].fun&&"function"==typeof t.button[t.button.length>1?1:0].fun&&t.button[t.button.length>1?1:0].fun(o.target),setTimeout(a.removeCover,50)):"no"==e(o.target).attr("class")&&(i&&t.button[0].fun&&"function"==typeof t.button[0].fun&&t.button[0].fun(o.target),a.removeCover,setTimeout(a.removeCover,50))))})},removeCover:function(){e(".nb_show_box").remove(),e("body").removeAttr("style")}},new n(t)}}(jQuery,window);